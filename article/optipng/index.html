<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - Optipng Filter</title>
    <link rel="stylesheet" type="text/css" href="/style.css" media="screen">
    <link rel="icon" href="/favicon.png">
    <meta name="generator" content="nanoc 3.2.4">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600|Inconsolata' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div id="main">
      <h1>Optipng Filter</h1>

<p>today, i added optipng filter. this is the coolest way i guess.</p>

<p><a href="https://gist.github.com/1655310">gist: 1655310</a></p>

<p>in this case, i added sample file and check their file sizes...</p>

<p><img src="/2011-01-22/1.png" alt="before" />
<img src="/2011-01-22/2.png" alt="before" />
before => 88,152 bytes</p>

<p><img src="/2011-01-22/3.png" alt="after" />
<img src="/2011-01-22/4.png" alt="after" />
<strong>after => 45,715 bytes</strong></p>

<p>newest nanoc can compile once and skip after.</p>

<p>usage is adding <code>filter :optipng, :level =&gt; 2</code>(between 0 and 7) to your <code>Rules</code> file.</p>

<p>but i don't add filtering binaries, so you should do that...</p>

<pre><code>if item.binary?
  case item[:extension]
  when 'png'
    filter :optipng, :level =&gt; 2
  end
end
</code></pre>

<p>this trick is from <a href="http://nanoc.stoneship.org/docs/6-guides/#using-filters-based-on-file-extensions">guides</a></p>

<p>hopefully enjoy!</p>

      
      <p>
        <a href="/">Home</a>
      </p>
      
    </div>
    <div id="sidebar">
      <h2>Documentation</h2>
      <ul>
        <li><a href="http://nanoc.stoneship.org/docs/">Documentation</a></li>
        <li><a href="http://nanoc.stoneship.org/docs/3-getting-started/">Getting Started</a></li>
      </ul>
      <h2>Community</h2>
      <ul>
        <li><a href="http://groups.google.com/group/nanoc/">Discussion Group</a></li>
        <li><a href="irc://chat.freenode.net/#nanoc">IRC Channel</a></li>
        <li><a href="http://projects.stoneship.org/trac/nanoc/">Wiki</a></li>
      </ul>
      <h2>Archive</h2>
      <ul>
        
          <li><a href="/article/optipng/">Optipng Filter</a></li>
        
      </ul>
    </div>
  </body>
</html>
